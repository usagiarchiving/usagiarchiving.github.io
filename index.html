<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My GitHub Backup Archive</title>
    
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    <link rel="stylesheet" href="https://uicdn.toast.com/editor/latest/toastui-editor.min.css" />
    
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="loader">
        <div class="spinner"><i class="fas fa-spinner fa-spin"></i></div>
        <div id="loader-msg">GitHub와 통신 중...</div>
    </div>

    <div id="config-modal">
        <div class="modal-content">
            <h3>⚙️ GitHub 연동 설정</h3>
            <p class="warning-text">* 404 오류 시 Repo 이름과 ID를 확인하세요.</p>
            
            <label>GitHub ID</label>
            <input type="text" id="cfg-owner" placeholder="예: git-user-id">
            
            <label>Repository Name</label>
            <input type="text" id="cfg-repo" placeholder="예: my-backup">
            
            <label>Token (Repo 권한 필수)</label>
            <input type="password" id="cfg-token" placeholder="ghp_...">
            
            <button class="btn-accent full-width" onclick="saveConfig()">연동 정보 저장 및 연결</button>
            <button class="btn-ghost full-width mt-5" onclick="closeConfig()">닫기</button>
        </div>
    </div>

    <header>
        <div class="header-left">
            <button class="btn-ghost" id="back-btn" style="display:none;"><i class="fas fa-arrow-left"></i></button>
            <div class="logo" onclick="goHome()">My GitBackup</div>
        </div>
        <div class="header-right">
            <button class="btn-ghost" onclick="openConfig()"><i class="fas fa-cog"></i> 설정</button>
            <button class="btn-primary" onclick="goWrite()"><i class="fas fa-pen"></i> 글쓰기</button>
        </div>
    </header>

    <div class="container">
        <aside class="sidebar">
            <div class="cat-tree" id="category-root">
                </div>
            
            <div class="cat-controls">
                <h4>카테고리 관리</h4>
                <input type="text" id="new-cat-name" placeholder="카테고리 이름 입력">
                
                <div style="display: flex; gap: 5px; margin-bottom: 10px;">
                    <button class="btn-ghost border-btn" style="flex:1;" onclick="addRootCategory()">+ 대분류 추가</button>
                </div>

                <div style="display: flex; gap: 5px; align-items: center;">
                    <select id="parent-cat-select" style="flex:1; margin-bottom:0;">
                        <option value="">상위 폴더 선택</option>
                    </select>
                    <button class="btn-ghost border-btn" style="width: 80px;" onclick="addSubCategory()">+ 추가</button>
                </div>

                <hr style="margin: 15px 0; border: 0; border-top: 1px solid #eee;">
                <button class="btn-accent full-width" onclick="syncData()">💾 전체 저장 (GitHub Sync)</button>
            </div>
        </aside>

        <main class="main">
            <div id="page-list" class="page active">
                <h2 id="list-title" class="page-title">전체 글</h2>
                <div id="post-list-container"></div>
            </div>

            <div id="page-write" class="page">
                <div class="input-row">
                    <select id="write-cat-select">
                        <option value="">카테고리 선택</option>
                    </select>
                </div>
                <div class="input-row">
                    <input type="text" id="write-title" placeholder="제목을 입력하세요">
                </div>
                <div id="editor"></div>
                <div class="btn-group-right">
                    <button class="btn-ghost" onclick="goHome()">취소</button>
                    <button class="btn-primary" onclick="savePost()">발행 및 저장</button>
                </div>
            </div>

            <div id="page-read" class="page">
                <div id="read-header">
                    <h1 id="read-title"></h1>
                    <span id="read-date"></span>
                </div>
                <div id="read-content" class="toastui-editor-contents"></div>
                <div class="read-footer">
                    <button class="btn-ghost" onclick="editPost()">수정</button>
                    <button class="btn-danger" onclick="deletePost()">삭제</button>
                </div>
            </div>
        </main>
    </div>

    <script src="https://uicdn.toast.com/editor/latest/toastui-editor-all.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
